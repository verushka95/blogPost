(function(){"use strict";var t={229:function(t,e,o){var s=o(963),n=o(252),i=o(577);const a={class:"blog"},l={class:"blog__container container"},r={class:"blog__action"},c=(0,n._)("hr",null,null,-1),d={key:0,class:"blog__posts"},u={class:"post__name"},p=(0,n._)("span",{class:"post__subtitle"},"Название:",-1),_=["onInput"],m=(0,n._)("hr",null,null,-1),g=["onInput"],b=["onClickOnce"],h=["onClick"],v={key:1,class:"blog__info"},P=(0,n._)("div",{class:"modal__text"},"Уверены, что хотите удалить данный пост?",-1),f={class:"modal__action"};function T(t,e,o,T,D,w){const S=(0,n.up)("blog-sort"),y=(0,n.up)("blog-pagination"),O=(0,n.up)("app-modal");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",l,[(0,n._)("div",r,[w.hasPosts?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn blog__add",type:"button",onClick:e[1]||(e[1]=e=>t.addPost())},"Добавить пост")):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn blog__load",type:"button",onClick:e[0]||(e[0]=e=>t.loadData())},"Загрузить посты"))]),c,w.hasPosts?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(S,{modelValue:D.sortSelect,"onUpdate:modelValue":e[2]||(e[2]=t=>D.sortSelect=t)},null,8,["modelValue"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.paginateData,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"blog__post post",key:t.id},[(0,n._)("div",u,[p,(0,n._)("div",{class:"post__name-post",contenteditable:"true",onInput:e=>w.editTitle(e,t.id)},(0,i.zw)(t.title),41,_)]),m,(0,n._)("div",{class:"post__body",contenteditable:"true",ref_for:!0,ref:"post"+t.id,onInput:e=>w.editDescr(e,t.id)},(0,i.zw)(t.excerpt),41,g),t.body!==t.excerpt?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"post__more btn",type:"button",onClickOnce:e=>w.getFullText(t.body,t.id)}," Полный текст ",40,b)):(0,n.kq)("",!0),(0,n._)("div",{class:"post__remove",onClick:e=>w.confirmDelete(t.id)},"Удалить",8,h)])))),128)),(0,n.wy)((0,n.Wm)(y,{number:D.pageNumber,count:w.pageCount,onToPrev:w.prevPage,onToNext:w.nextPage},null,8,["number","count","onToPrev","onToNext"]),[[s.F8,w.hasPagination]])])):((0,n.wg)(),(0,n.iD)("div",v," Пока постов нет "))]),(0,n.Wm)(O,{title:"Подтвердите удаление",class:(0,i.C_)({show:D.modalActive}),onUpdateParent:w.updateData},{default:(0,n.w5)((()=>[P,(0,n._)("div",f,[(0,n._)("button",{type:"button",class:"modal__btn btn",onClick:e[3]||(e[3]=t=>w.removePost(D.curPost))},"Да"),(0,n._)("button",{type:"button",class:"modal__btn btn",onClick:e[4]||(e[4]=t=>D.modalActive=!1)},"Нет")])])),_:1},8,["class","onUpdateParent"])])}var D=o(907);const w={class:"modal"},S={class:"modal__content"},y={class:"modal__header"},O={class:"modal__title"},k={class:"modal__body"};function C(t,e,o,s,a,l){return(0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",S,[(0,n._)("div",y,[(0,n._)("div",O,(0,i.zw)(o.title),1),(0,n._)("span",{class:"modal__close",onClick:e[0]||(e[0]=t=>l.modalClose(t))},"✖")]),(0,n._)("div",k,[(0,n.WI)(t.$slots,"default")])])])}var x={name:"AppModal",props:{title:{type:String}},methods:{modalClose(){this.$emit("updateParent",{modalActive:!1})}}},A=o(744);const E=(0,A.Z)(x,[["render",C]]);var N=E;const I={class:"blog__pagination"},L=["disabled"],z=["disabled"];function j(t,e,o,s,i,a){return(0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("button",{class:"btn",disabled:0==o.number,onClick:e[0]||(e[0]=(...t)=>a.toPrev&&a.toPrev(...t))}," ⇦ ",8,L),(0,n._)("button",{class:"btn",disabled:o.number>=o.count-1,onClick:e[1]||(e[1]=(...t)=>a.toNext&&a.toNext(...t))}," ⇨ ",8,z)])}var $={name:"BlogPagination",props:{number:{type:Number},count:{type:Number}},methods:{toPrev(){this.$emit("toPrev")},toNext(){this.$emit("toNext")}}};const B=(0,A.Z)($,[["render",j]]);var F=B;const M={class:"blog__sort sort"},R=(0,n.Uk)(" Сортировка: "),U=["value"];function V(t,e,o,s,a,l){return(0,n.wg)(),(0,n.iD)("div",M,[R,(0,n._)("select",{name:"sort",class:"sort__select",onChange:e[0]||(e[0]=t=>l.changeSort(t))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.sort,(t=>((0,n.wg)(),(0,n.iD)("option",{value:t.value,key:t.id},(0,i.zw)(t.label),9,U)))),128))],32)])}var W={name:"BlogSort",data(){return{sort:[{id:0,label:"По умолчанию",value:""},{id:1,label:"По названию: А - Я",value:"name_asc"},{id:2,label:"По названию: Я - А",value:"name_desc"}]}},methods:{changeSort(t){this.$emit("update:modelValue",t.target.value)}}};const Z=(0,A.Z)(W,[["render",V]]);var H=Z,J={name:"App",components:{AppModal:N,BlogPagination:F,BlogSort:H},data(){return{pageNumber:0,size:5,sortSelect:"",modalActive:!1,curPost:""}},computed:{...(0,D.Se)(["getPosts"]),hasPosts(){return this.getPosts&&this.getPosts.length>0},hasPagination(){return this.getPosts.length>this.size},pageCount(){let t=this.getPosts.length,e=this.size;return Math.ceil(t/e)},paginateData(){const t=this.pageNumber*this.size,e=t+this.size;return this.getPosts.slice(t,e)}},methods:{...(0,D.nv)(["setPosts","loadData","editTitlePost","editDescrPost","deletePost","addPost","sortPosts"]),getFullText(t,e){let o="post"+e,s=this.$refs[o];s[0].innerText=t},editTitle(t,e){let o=t.target.innerText;this.editTitlePost({newTitle:o,post:e})},editDescr(t,e){let o=t.target.innerText;t.target.onblur=()=>{this.editDescrPost({newDescr:o,post:e})}},removePost(t){this.deletePost(t),this.modalActive=!1},confirmDelete(t){this.modalActive=!0,this.curPost=t},nextPage(){this.pageNumber++},prevPage(){this.pageNumber--},updateData(t){this.modalActive=t.modalActive}},mounted(){localStorage.getItem("posts")&&this.setPosts(JSON.parse(localStorage.getItem("posts")))},watch:{sortSelect(t){this.sortPosts(t)}}};const K=(0,A.Z)(J,[["render",T]]);var Y=K,q=(0,D.MT)({state:{posts:[]},getters:{getPosts:t=>t.posts},mutations:{LOAD_DATA(t,e){t.posts=e,t.posts.map((t=>{t.excerpt=G(t.body)}))},EDIT_TITLE_POST(t,{newTitle:e,post:o}){let s=t.posts.find((t=>t.id===o));s.title=e},EDIT_DESCR_POST(t,{newDescr:e,post:o}){let s=t.posts.find((t=>t.id===o));s.body=e,s.excerpt=G(e)},DELETE_POST(t,e){t.posts=t.posts.filter((t=>t.id!==e))},ADD_POST(t){t.posts.push({id:Date.now(),userId:1,title:"",body:"",excerpt:""}),t.posts.sort(et)},SET_POSTS(t,e){t.posts=e},SORT_POSTS(t,e){switch(e){case"name_asc":t.posts.sort(Q);break;case"name_desc":t.posts.sort(X);break;default:t.posts.sort(tt)}}},actions:{async loadData({commit:t}){fetch("https://jsonplaceholder.typicode.com/posts?_limit=5").then((t=>t.json())).then((e=>{t("LOAD_DATA",e),this.dispatch("setStorage")}))},editTitlePost({commit:t},{newTitle:e,post:o}){t("EDIT_TITLE_POST",{newTitle:e,post:o}),this.dispatch("setStorage")},editDescrPost({commit:t},{newDescr:e,post:o}){t("EDIT_DESCR_POST",{newDescr:e,post:o}),this.dispatch("setStorage")},deletePost({commit:t},e){t("DELETE_POST",e),this.dispatch("setStorage")},addPost({commit:t}){t("ADD_POST"),this.dispatch("setStorage")},setStorage({state:t}){localStorage.posts=JSON.stringify(t.posts)},setPosts({commit:t},e){t("SET_POSTS",e)},sortPosts({commit:t},e){t("SORT_POSTS",e)}}});function G(t){return t.length>50?t.split(0,50)[0]+"...":t}let Q=function(t,e){return t.title.toLowerCase()>e.title.toLowerCase()?1:-1},X=function(t,e){return t.title.toLowerCase()<e.title.toLowerCase()?1:-1},tt=function(t,e){return t.id>e.id?1:-1},et=function(t,e){return t.id<e.id?1:-1};(0,s.ri)(Y).use(q).mount("#app")}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,o),i.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,i){if(!s){var a=1/0;for(d=0;d<t.length;d++){s=t[d][0],n=t[d][1],i=t[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&i||a>=i)&&Object.keys(o.O).every((function(t){return o.O[t](s[r])}))?s.splice(r--,1):(l=!1,i<a&&(a=i));if(l){t.splice(d--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,n,i]}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,a=s[0],l=s[1],r=s[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(r)var d=r(o)}for(e&&e(s);c<a.length;c++)i=a[c],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(d)},s=self["webpackChunkblog"]=self["webpackChunkblog"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(229)}));s=o.O(s)})();
//# sourceMappingURL=app.a2321b09.js.map